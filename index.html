<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Checks$</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "San Francisco", "Helvetica Neue", Arial, sans-serif;
      background-color: #f5f5f7;
    }
    .card {
      @apply bg-white rounded-2xl shadow-md p-6 mb-6 transition-all;
    }
    .pill {
      @apply px-4 py-2 rounded-full text-sm font-semibold cursor-pointer;
    }
    .pill-active {
      @apply bg-blue-500 text-white shadow-md;
    }
    .pill-inactive {
      @apply bg-gray-200 text-gray-700;
    }
  </style>
</head>
<body class="flex justify-center min-h-screen items-start py-10 px-4">

  <div class="w-full max-w-md">
    <h1 class="text-2xl font-semibold text-center mb-6">ðŸ’µ Checks$</h1>

    <!-- Salary input -->
    <div class="card">
      <label for="salary" class="block text-lg font-medium mb-2">Enter your check amount:</label>
      <input id="salary" type="number" placeholder="e.g. 600"
        class="w-full p-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4">
      <button onclick="calculateSplit()" 
        class="w-full bg-blue-500 text-white py-3 rounded-xl font-semibold hover:bg-blue-600 transition">
        Calculate
      </button>
    </div>

    <!-- Category Pills -->
    <div id="categoryTabs" class="hidden flex justify-between bg-gray-100 p-2 rounded-full mb-6">
      <div id="pillNeeds" onclick="showCategory('needs')" class="pill pill-active">Needs</div>
      <div id="pillWants" onclick="showCategory('wants')" class="pill pill-inactive">Wants</div>
      <div id="pillSavings" onclick="showCategory('savings')" class="pill pill-inactive">Savings</div>
    </div>

    <!-- Category Content -->
    <div id="categoryContent" class="card hidden">
      <h2 id="categoryTitle" class="text-xl font-semibold mb-2"></h2>
      <p class="text-gray-600">Budget: $<span id="categoryBudget">0</span></p>
      <p class="text-gray-800 font-semibold">Remaining: $<span id="categoryRemaining">0</span></p>

      <div class="flex mt-3 gap-2">
        <input id="categoryInput" type="number" placeholder="Add expense"
          class="flex-1 p-2 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500">
        <button onclick="addExpense(currentCategory)" 
          class="px-4 bg-green-500 text-white rounded-xl hover:bg-green-600">+</button>
      </div>

      <div id="categoryList" class="expense-list mt-4"></div>
    </div>

    <!-- Clear All -->
    <button onclick="clearAll()" 
      class="w-full mt-4 bg-red-500 text-white py-3 rounded-xl font-semibold hover:bg-red-600 transition hidden"
      id="clearBtn">
      Clear All Data
    </button>
  </div>

  <script>
    let budgets = { needs: 0, wants: 0, savings: 0 };
    let remaining = { needs: 0, wants: 0, savings: 0 };
    let expenses = { needs: [], wants: [], savings: [] };
    let currentCategory = "needs";

    // Load saved data if exists
    window.onload = function () {
      const savedData = JSON.parse(localStorage.getItem("salaryApp"));
      if (savedData) {
        budgets = savedData.budgets;
        remaining = savedData.remaining;
        expenses = savedData.expenses;
        document.getElementById("salary").value = savedData.salary;
        updateUI();
        document.getElementById("categoryTabs").classList.remove("hidden");
        document.getElementById("categoryContent").classList.remove("hidden");
        document.getElementById("clearBtn").classList.remove("hidden");
        showCategory("needs");
      }
    };

    function calculateSplit() {
      const salary = parseFloat(document.getElementById("salary").value);
      if (isNaN(salary) || salary <= 0) return;

      budgets.needs = salary * 0.5;
      budgets.wants = salary * 0.3;
      budgets.savings = salary * 0.2;

      remaining = { ...budgets };
      expenses = { needs: [], wants: [], savings: [] };

      saveData(salary);
      updateUI();

      document.getElementById("categoryTabs").classList.remove("hidden");
      document.getElementById("categoryContent").classList.remove("hidden");
      document.getElementById("clearBtn").classList.remove("hidden");
      showCategory("needs");
    }

    function addExpense(category) {
      const input = document.getElementById("categoryInput");
      const value = parseFloat(input.value);
      if (isNaN(value) || value <= 0) return;

      expenses[category].push(value);
      remaining[category] -= value;

      input.value = ""; // clear input
      saveData(document.getElementById("salary").value);
      updateUI();
      showCategory(category);
    }

    function updateUI() {
      // Update active category data
      showCategory(currentCategory);
    }

    function showCategory(category) {
      currentCategory = category;

      // Update pills
      document.getElementById("pillNeeds").className = "pill " + (category === "needs" ? "pill-active" : "pill-inactive");
      document.getElementById("pillWants").className = "pill " + (category === "wants" ? "pill-active" : "pill-inactive");
      document.getElementById("pillSavings").className = "pill " + (category === "savings" ? "pill-active" : "pill-inactive");

      // Update title
      let titles = { needs: "ðŸ›’ Needs (50%)", wants: "ðŸŽ‰ Wants (30%)", savings: "ðŸ’¾ Savings (20%)" };
      document.getElementById("categoryTitle").innerText = titles[category];

      // Budget + Remaining
      document.getElementById("categoryBudget").innerText = budgets[category].toFixed(2);
      document.getElementById("categoryRemaining").innerText = remaining[category].toFixed(2);

      // Expense list
      const list = document.getElementById("categoryList");
      list.innerHTML = "";
      expenses[category].forEach((exp, i) => {
        const div = document.createElement("div");
        div.className = "expense-item";
        div.innerHTML = `<span>Expense ${i + 1}</span><span>$${exp.toFixed(2)}</span>`;
        list.appendChild(div);
      });
    }

    function saveData(salary) {
      const data = { salary, budgets, remaining, expenses };
      localStorage.setItem("salaryApp", JSON.stringify(data));
    }

    function clearAll() {
      localStorage.removeItem("salaryApp");
      budgets = { needs: 0, wants: 0, savings: 0 };
      remaining = { needs: 0, wants: 0, savings: 0 };
      expenses = { needs: [], wants: [], savings: [] };
      document.getElementById("salary").value = "";
      document.getElementById("categoryTabs").classList.add("hidden");
      document.getElementById("categoryContent").classList.add("hidden");
      document.getElementById("clearBtn").classList.add("hidden");
    }
  </script>
</body>
</html>
